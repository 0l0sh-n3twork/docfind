{% extends 'medicalapp/listbase.html' %}
{% block content %}

<div class="container" style="width: 90%;">
    <div class="listContainer" style="height: 100%; padding: 20px;">
      <div class="list-table">
        <h2 style="text-align: center; margin-top: 10px">Showing Doctor List By Disease</h2>    
       
    {% for disease in diseases %}
    {% if disease.doctor_set.all %}
    <h3> {{disease.name}} </h3>
    <table class="table table-hover" style="border: 2px solid #ccc; overflow:hidden ; box-sizing: border-box; box-shadow: 1px 1px .5px 1px #ccc;">
        <thead>
    
  </thead>
  <tbody>
    {% for doctor in disease.doctor_set.all %}
    <tr class="tablerow" style="text-align: left;">
      <th scope="row"><img class="meta-image" src="{{ doctor.image.url }}" alt="{{ doctor.name }}}"> </th>
      <td>
        <a href="{% url 'doctor-detail' doctor.id %}" 
        style="text-decoration: none; color: black; text-transform: uppercase;">{{doctor.name}}</a></td>
      <td>
        {% for hospital in doctor.hospital_set.all %}
            {{hospital.name}}
        {% endfor %}
      </td>      
      <td>
        {% for disease in doctor.treats.all %}
          {{disease}},
        {% endfor %}
      </td>
      <td >
        {% for hospital in doctor.hospital_set.all %}
          {% if hospital.link %}
            <a class="btn btn-success"  href="{{ hospital.link }}" > Available </a>
          {% else %}
            Not Available
          {% endif %}
        {% endfor %}
      </td> 
      
    </tr> 
    {% endfor %} 
    {% else %}
    {% endif %}
</tbody>
</table>
    
    {% endfor %} 
{% endblock content %}